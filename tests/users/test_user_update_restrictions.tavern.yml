test_name: User Update Restrictions

marks:
  - usefixtures:
      - user_token
      - user_id

stages:
  - name: "User Try to Change Role (Expect 403)"
    request:
      url: "{BASE_URL}/users/me"
      method: PUT
      headers:
        Authorization: "Bearer {user_token}"
      json:
        fullName: "Hacker User"
        age: 25
        region: "US"
        gender: MALE
        maritalStatus: SINGLE
        role: ADMIN
    response:
      status_code: 403
      json:
        code: FORBIDDEN

  - name: "User Try to Change Active Status (Expect 403)"
    request:
      url: "{BASE_URL}/users/me"
      method: PUT
      headers:
        Authorization: "Bearer {user_token}"
      json:
        fullName: "Suicidal User"
        age: 25
        region: "US"
        gender: MALE
        maritalStatus: SINGLE
        isActive: false
    response:
      status_code: 403
      json:
        code: FORBIDDEN
