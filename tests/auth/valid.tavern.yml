test_name: Auth Valid Scenarios

marks:
  - usefixtures:
      - generate_random_email

stages:
  - name: "Register 201 FULL"
    request:
      url: "{BASE_URL}/auth/register"
      method: POST
      json:
        email: "{generate_random_email}"
        password: "V3rYH@rdP@$sW0Rd!1!11!!!"
        fullName: "Igor Bailyuk"
        age: 27
        region: Europe
        gender: MALE
        maritalStatus: SINGLE
    response:
      status_code: 201
      json:
        expiresIn: 3600
        user:
          email: "{generate_random_email}"
          fullName: "Igor Bailyuk"
          role: USER
          isActive: true

  - name: "Login User Success"
    request:
      url: "{BASE_URL}/auth/login"
      method: POST
      json:
        email: "{generate_random_email}"
        password: "V3rYH@rdP@$sW0Rd!1!11!!!"
    response:
      status_code: 200
      json:
        user:
          email: "{generate_random_email}"
        accessToken: !anything

  - name: "Login Admin Success"
    request:
      url: "{BASE_URL}/auth/login"
      method: POST
      json:
        email: "{ADMIN_EMAIL}"
        password: "{ADMIN_PASSWORD}"
    response:
      status_code: 200
      json:
        user:
          role: ADMIN

  - name: "Register 201 RFC 5322 Email"
    request:
      url: "{BASE_URL}/auth/register"
      method: POST
      json:
        email: "rfc.{generate_random_email}"
        password: "V3rYH@rdP@$sW0Rd!1!11!!!"
        fullName: "RFC User"
    response:
      status_code: 201
      json:
        user:
          email: "rfc.{generate_random_email}"

  - name: "Register 201 Extra Fields Ignored"
    request:
      url: "{BASE_URL}/auth/register"
      method: POST
      json:
        email: "extra.{generate_random_email}"
        password: "V3rYH@rdP@$sW0Rd!1!11!!!"
        fullName: "Extra User"
        extra_field: "should_be_ignored"
    response:
      status_code: 201
