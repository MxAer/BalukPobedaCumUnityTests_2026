test_name: Регистрация (Edge Cases)

marks:
  - usefixtures:
      - generate_random_email
      - generate_secondary_email

stages:
  - name: "Проверить 422 Enum Parsing (0 -> Enum) /auth/register"
    request:
      url: "{BASE_URL}/auth/register"
      method: POST
      json:
        email: "{generate_random_email}"
        password: "V3rYH@rdP@$sW0Rd!1!11!!!"
        fullName: "Enum Tester"
        age: 27
        region: Europe
        gender: 0
        maritalStatus: 0
    response:
      status_code: 422
      json:
        code: VALIDATION_FAILED
        path: /api/v1/auth/register

  - name: "Проверить 201 Extra Fields (Strict JSON disabled) /auth/register"
    request:
      url: "{BASE_URL}/auth/register"
      method: POST
      json:
        email: "{generate_secondary_email}"
        password: "V3rYH@rdP@$sW0Rd!1!11!!!"
        fullName: "Extra Field Tester"
        extra_field_should_be_ignored: "unexpected_value"
    response:
      status_code: 201
