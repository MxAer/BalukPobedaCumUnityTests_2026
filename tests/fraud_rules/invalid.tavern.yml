test_name: Fraud Rules Invalid Scenarios

marks:
  - usefixtures:
      - admin_token
      - generate_random_email

stages:
  - name: "Create Rule"
    request:
      url: "{BASE_URL}/fraud-rules"
      method: POST
      headers:
        Authorization: "Bearer {admin_token}"
      json:
        name: "Conflict Rule {generate_random_email}"
        dslExpression: "amount > 100"
    response:
      status_code: 201

  - name: "Create Conflict Rule (409)"
    request:
      url: "{BASE_URL}/fraud-rules"
      method: POST
      headers:
        Authorization: "Bearer {admin_token}"
      json:
        name: "Conflict Rule {generate_random_email}"
        dslExpression: "amount > 200"
    response:
      status_code: 409
